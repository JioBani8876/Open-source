## Elastic Search 오픈소스

https://github.com/elastic

* Apache Lucence 기반의 Full-text 엔진

특징: Near Real-time인덱싱 + ELK 스택 연동성

사용 가능 기능

* 질의어 자동 완성(auto completion)
* 오타 수정(correcting typos)
* 일치 항목 강조 표시(highlighting matches)
* 동의어 처리(handling synoms)
* Relevance 조정(adjusting relevance)
* 데이터 집계 및 분석(aggregate & analyze data)

ES 사용 예

* 데이터 집합 분석(aggregation analysis) 및 ML기술을 이용한 데이터 예측(forecast)
* 이상치 파악(anomaly derection)을 통한 실시간 모니터링 및 알림

ES 사용 이유

* 뛰어난 Full-text search
* 텍스트 변형(유의어, 동의어)를 통한 검색 가능
* 비정형 데이터 분석, 처리 가능
* 형태소 분석을 통한 자연어 처리 가능
* Inverted list를 이용한 빠른 검색 기능



Elastic Search

**Search**

* 검색 질의에 대한 답변

데이터가 유입 될 때 indexing이라는 프로세스를 진행하여 검색 및 통계를 위한 Document를 확보함.

검색어를 추출하기 위한 프로세스인 Analysis는 캐릭터 필터(Character Filter) - 토크나이저(Tokenizer) - 토큰 필터(Token Filter)로 구성, 순차적 실행

* 캐릭터 필터 - 불필요한 데이터의 삭제, 변경 등 입력된 원본 데이터를 분석에 필요한 형태로 변환
* 토크나이저 - 검색의 기초 데이터로 사용하기 위해 필요로 하는 키워드 데이터로 분리
* 토큰 필터 - 토크나이저 작업 시 발생한 불필요한 데이터를 삭제하거나, 영문인 경우 모두 소문자로 변경하는 등 중요 데이터만 남기고 분석 작업을 종료



**Observability**

머신 데이터를 기반으로 데이터 생명 주기 관점에서 시각화를 통해 기능을 수행함

* Logs - 로그 데이터를 머신에서 이벤트가 발생할 때마다 생성되는 데이터로 받아들임
* Mertric - 머신이 일정 주기로 측정하여 만든 측정 데이터로 이해하여 받아들임
* APM - Logs와 Metric을 통해 받아들인 데이터를 종합, 추척하여 운영 중인 애플리케이션의 성능 분석을 용이하게함

키바나 애플리케이션(데이터 시각화 도구)

(디스커버, 비주얼라이즈, 대시보드로 구성)

* 디스커버 - 원본 도큐먼트를 검색하거나 필터링 할 수 있는 도구
  * 수집한 데이터의 정형화된 모습과 필요 데이터 검색, 필드를 구성하는 데이터의 간단한 통계 수치 확인 가능
* 비주얼라이즈 - 축적된 데이터를 막대그래프, 파이 차트, 타일 맵, 지도 등 다양한 형식으로 시각화 하여 보여줌
* 대시보드 - 비주얼라이즈를 통해 시각화한 객체를 모아 하나의 화면에서 확인할 수 있도록 함



**Security**

보안 정보와 이벤트 관리 솔루션을 키바나(데이터 시각화 도구)에 탑재하여 외부의 시스템 공격이나 이상 징후를 선제적으로 방어하고 조치함

엘라스틱 설치를 통해 전송되는 데이터를 허가되지 않은 사용자의 접근과 의도치 않은 수정으로부터 가장 먼저 구현 => 인증 절차



**도입 시 고려사항**

기업 여건에 맞는 서브스크립션 선택

* 엘라스틱서치는 Search, Observability, Security를 위한 다양한 소프트웨어를 갖추고 잇으며 기본 기능은 무료로 사용할 수 있는 **베이직 서브스크립션** 을 제공함

전문 기술서비스 활용

* 가상머신(JVM)에서 구동함. JVM Heap 메모리 등의 자원 사용률이 높은 통계 집계 질의와 인덱싱은 시스템에 부담을 주어 장애를 발생시킬 수 있다. - 인덱스 설계 최적화 중요

업그레이드 시 임의 수정 코드 반영 확인



**ElasticSearch 라이선싱**

Elasticsearch와 Kibana의 Apache 2.0 라이선스 소스 코드를 Elastic License 및 SSPL 1.0에 따라 이중 라이선스로 전환하여 사용자가 어느 라이선스를 적용할 지 선택할 수 있도록 변경하고 있다.

 Elastic License(Elastic License v2 또는 ELv2)를 단순화하고 훨씬 더 허용 범위가 커지도록 하고 있다. 기본 배포판은 거의 지난 3년 동안 그랬던 것처럼 계속 Elastic License를 따르게 되며, 더 이상 Apache 2.0 배포는 생산되지 않는다.

Elastic License 2.0은 Elasticsearch와 Kibana의 모든 무료 및 유료 기능의 소스 코드와 Elastic의 배포에 적용된다. ELv2를 이용하는 우리의 목표는 남용으로부터 보호하면서 가능한 한 많은 것을 허용하는 것입니다. 이 라이선스는 다음의 세 가지 간단한 제한 사항과 함께 사용, 수정, 파생 작품 생성 및 재배포를 할 수 있는 자유로운 권리를 허용함.

* 제품을 다른 사람에게 관리형 서비스로 제공 X
* 라이선스 키 기능을 우회하거나 라이선스 키로 보호되는 기능을 제거하면/숨길 수 없다.
* 라이선스, 저작권 또는 기타 통지를 제거하거나 숨길 수 없다.



Elastic Search 흐름

Ex) Elastic Search 내부 DFD

![검색어_Elastic Search 내부 DFD 예시](/검색어_Elastic Search 내부 DFD 예시.png)

App => 이벤트 =>pipeline=>ES(내부 변환)=>pipeline => metrics index(머신이 일정 주기로 측정하여 만든 측정 데이터로 이해하여 받아들이는 것) => 변환 후 내보냄

 

user =(검색어 벡터)> => 위의 설명처럼 내부 처리 후 => (검색어 벡터) 내보냄



#### 입출력 및 라이선스

입력 : 검색 문장

출력 : 검색 값

라이센스: Elastic License 및 SSPL 1.0에 따른 이중 라이선스 Apache 2.0 라이선스 소스 코드  
